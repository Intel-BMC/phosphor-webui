<loader loading="loading"></loader>
<div id="sensors" class="sensors">
  <h1 class="page-title">Sensors</h1>

  <div class="page-content-box toggle-filter">
    <div class="filter-box"><label class="trim-text">Filter by Status</label></div>
    <div class="filter-box">
      <button class="active filter-btn" ng-click="toggleSeverityAll()"
        ng-class="selectedSeverity.all ? 'btn-filter-primary' : 'btn-filter-secondary'"><span
          class="alert-text-neutral">&#9679;</span>&nbsp;All&nbsp;nodes
      </button>
    </div>
    <div class="filter-box">
      <button class="filter-btn btn-filter-secondary" ng-click="toggleSeverity('critical')"
        ng-class="selectedSeverity.critical ? 'btn-filter-primary' : 'btn-filter-secondary'"><span
          class="alert-text-critical">&#9679;</span>&nbsp;Critical
      </button>
    </div>
    <div class="filter-box">
      <button class="filter-btn" ng-click="toggleSeverity('warning')"
        ng-class="selectedSeverity.warning ? 'btn-filter-primary' : 'btn-filter-secondary'"><span
          class="alert-text-warning">&#9679;</span>&nbsp;Warning
      </button>
    </div>
    <div class="filter-box">
      <button class="filter-btn" ng-click="toggleSeverity('normal')"
        ng-class="selectedSeverity.normal ? 'btn-filter-primary' : 'btn-filter-secondary'"><span
          class="alert-text-good">&#9679;</span>&nbsp;Normal
      </button>
    </div>
  </div>

  <div class="page-content-box">
    <div class="filter-box"><label class="trim-text">Filter by Keyword</label></div>
    <div class="content__search search-box">
      <label for="content__search-input">Sensors Search</label>
      <input id="content__search-input" type="text" ng-model="customSearch" ng-keydown="doSearchOnEnter($event)" />
      <div class="search-submit__wrapper">
        <button class="clear-input" ng-click="clear()">&#10005;</button>
        <input id="content__search-submit" type="submit" class="btn content__search-submit" value="Search"
          ng-click="doSearchOnClick()" />
      </div>
    </div>
  </div>

  <div class="RMVpage-content-rnd">
    <div ng-show="filteredSensorData.length == 0">
      <span ng-if="selectedSeverity.all">{{messages.NO_SENSOR_DATA}}</span>
      <span ng-if="selectedSeverity.critical">{{messages.CRITICAL_NO_SENSOR_DATA}}</span>
      <span ng-if="selectedSeverity.warning">{{messages.WARNING_NO_SENSOR_DATA}}</span>
      <span ng-if="selectedSeverity.normal">{{messages.NORMAL_NO_SENSOR_DATA}}</span>
    </div>

    <table id="sensor-categories" class="page-content-rnd sensors__table data-table-1" cellpadding="0" cellspacing="0"
      ng-show="filteredSensorData.length">
      <thead class="sensors__thead fixed-table-header">
        <tr class="sensors__thead-row">
          <th class="sensors__thead-cell">Sensors ({{filteredSensorData.length}})</th>
          <th class="sensors__thead-cell">Low critical</th>
          <th class="sensors__thead-cell">Low warning</th>
          <th class="sensors__thead-cell sensor__heading-current">Current</th>
          <th class="sensors__thead-cell">High warning</th>
          <th class="sensors__thead-cell">High critical</th>
        </tr>
      </thead>
      <tbody class="sensors__tbody">
        <tr class="sensors__tbody-row"
          ng-repeat="sensor in data|filter:filterBySeverity|filter:filterBySearchTerms|orderBy:'+custom_order' as filteredSensorData">
          <td class="sensors__tbody-header">
            <span class="icon"
              ng-class="{'icon__critical': sensor.status == 'critical', 'icon__warning': sensor.status == 'warning', 'icon__normal': sensor.status == 'normal'}"
              aria-label="Sensor status: {{sensor.status}}"></span>
            <span>{{sensor.title}}</span>
          </td>
          <td class="sensors__tbody-cell">
            <span class="sensors__tbody-cell__title">Low&nbsp;critical</span>
            <span class="sensors__tbody-cell__content">
              <span class="sensors__tbody-info">{{sensor.CriticalLow}}</span>
              <span class="sensors__tbody-degree" ng-if="sensor.unit == 'C'">&deg;</span>
              <span class="sensors__tbody-unit">{{sensor.unit}}</span>
            </span>
          </td>
          <td class="sensors__tbody-cell">
            <span class="sensors__tbody-cell__title">Low&nbsp;warning</span>
            <span class="sensors__tbody-cell__content">
              <span class="sensors__tbody-info">{{sensor.WarningLow}}</span>
              <span class="sensors__tbody-degree" ng-if="sensor.unit == 'C'">&deg;</span>
              <span class="sensors__tbody-unit">{{sensor.unit}}</span>
            </span>
          </td>
          <td class="sensors__tbody-cell sensors__tbody-current"
            ng-class="{'sensors__tbody-current--critical': sensor.status == 'critical', 'sensors__tbody-current--warn': sensor.status == 'warning', 'sensors__tbody-current--normal': sensor.status == 'normal'}">
            <span class="sensors__tbody-cell__title">Current</span>
            <span class="sensors__tbody-cell__content">
              <span class="sensors__tbody-info">{{sensor.Value}}</span>
              <span class="sensors__tbody-degree" ng-if="sensor.unit == 'C'">&deg;</span>
              <span class="sensors__tbody-unit">{{sensor.unit}}</span>
            </span>
          </td>
          <td class="sensors__tbody-cell">
            <span class="sensors__tbody-cell__title">High&nbsp;warning</span>
            <span class="sensors__tbody-cell__content">
              <span class="sensors__tbody-info">{{sensor.WarningHigh}}</span>
              <span class="sensors__tbody-degree" ng-if="sensor.unit == 'C'">&deg;</span>
              <span class="sensors__tbody-unit">{{sensor.unit}}</span>
            </span>
          </td>
          <td class="sensors__tbody-cell">
            <span class="sensors__tbody-cell__title">High critical</span>
            <span class="sensors__tbody-cell__content">
              <span class="sensors__tbody-info">{{sensor.CriticalHigh}}</span>
              <span class="sensors__tbody-degree" ng-if="sensor.unit == 'C'">&deg;</span>
              <span class="sensors__tbody-unit">{{sensor.unit}}</span>
            </span>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="text-outro">
      <a ng-href="data:text/json;charset=utf-8,{{export_data}}" class="float-right"
        download="{{export_name}}">Export&nbsp;&nbsp;<img src="../../assets/icons/icon-export.png"></a>
    </div>
  </div>
</div>