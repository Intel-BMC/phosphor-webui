<loader loading="loading"></loader>
<div id="configuration-date-time">
  <form class="time__form" role="form" action="">

    <div class="float-right padding">
      <button type="button" class="btn btn-tertiary" ng-click="rowUpdate=false;refresh()">Reset</button>
      <button type="button" class="btn btn-tertiary" ng-click="saveDateTimeSettings()"
        ng-class="rowUpdate ? 'highlighted' : ''">Save Page Settings</button>
    </div>

    <br clear="all">
    <div class="row">

      <div class="columns col-md-12 col-sm-12">

        <div class="page-content-box">
          <legend>Date and time configuration:</legend>
          <div class="row">
            <label class="control-radio indent" for="ntp-time">Obtain Automatically from a Network Time Protocol (NTP)
              Server
              <input type="radio" id="ntp-time" ng-model="time.mode" value="NTP">
              <span class="control__indicator control__indicator-on"></span>
            </label>

            <div class="page-content-rnd slide-in" ng-class="time.mode == 'NTP' ? 'opened' : ''"
              ng-show="time.mode == 'NTP'">
              <h5>NTP Servers</h5>
              <div class="table row column dns-settings" ng-show="ntp.servers.length > 0">
                <div class="table__head fixed-table-header">
                  <div class="table__row">
                    <div class="table__cell">Entry</div>
                    <div class="table__cell">NTP Server</div>
                    <div class="table__cell action-wrapper"></div>
                  </div>
                </div>
                <div class="table__body">
                  <div class="table__row date-time__ntp-servers" ng-repeat="server in ntp.servers track by $index">
                    <div class="table__cell">{{$index+1}} <span ng-if="$first">(Primary)</span>
                    </div>

                    <div class="table__cell">
                      <input id="ntp-server{{$index+1}}" type="text" ng-readonly="time.mode != 'NTP'" ng-model="server"
                        ng-blur="ntp.servers[$index] = server" set-focus-on-new-input />
                    </div>

                    <div class="table__cell action-wrapper">

                      <div class="bmc-table__row-actions ng-scope">
                        <button ng-class="!server ? 'disabled' : ''" ng-show="!editNTPSettings"
                          class="btn btn-primary btn-small" ng-click="editNTPSettings=true;updatedRow()">
                          <icon alt="Complete" title="Complete" file="icon-check.svg" aria-hidden="true"></icon>
                        </button>
                        <button ng-show="editNTPSettings" class="btn btn-primary btn-small"
                          ng-click="editNTPSettings=false">
                          <icon alt="Edit" title="Edit" file="icon-edit.svg" aria-hidden="true"></icon>
                        </button>
                        <button class="btn btn-primary btn-small" ng-click="removeNTPField($index)">
                          <icon alt="Remove" title="Remove" file="icon-trashcan.svg" aria-hidden="true"></icon>
                        </button>
                      </div>

                    </div>

                  </div>
                </div>
              </div>

              <div class="message-box" ng-show="ntp.servers.length == 0">
                No NTP Servers currently specified.
              </div>

              <div>
                <button ng-click="addNTPField()" class="btn-icon">
                  <icon file="add--alt.svg" aria-hidden="true"></icon>
                  Add NTP server
                </button>
              </div>

            </div>
          </div>

          <div class="row">
            <label class="control-radio indent" for="manual-time">Manually set date and time
              <input type="radio" id="manual-time" ng-model="time.mode" value="Manual" />
              <span class="control__indicator control__indicator-on"></span>
            </label>

            <div class="page-content-rnd slide-in" ng-class="time.mode != 'NTP' ? 'opened' : ''"
              ng-show="time.mode != 'NTP'">

              <h5>Time Owner</h5>
              <select id="date-time-owner" ng-model="time.owner" class="minimal">
                <option ng-repeat="owner in timeOwners">{{owner}}</option>
              </select>

              <div class="bmc-time">
                <h5>
                  BMC <span ng-if="time.owner != 'Split'">and Host</span> Time
                </h5>
                <table class="overview-config-table">
                  <tr>
                    <td>Date</td>
                    <td><input type="date" ng-change="updatedRow()" ng-model="bmc.date" ng-readonly="time.mode == 'NTP'"
                        min="2018-01-01" max="2099-12-31" /></td>
                  </tr>
                  <tr>
                    <td>Time</td>
                    <td><input type="time" ng-change="updatedRow()" ng-model="bmc.date"
                        ng-readonly="time.mode == 'NTP'" /></td>
                  </tr>
                  <tr>
                    <td>Time Zone</td>
                    <td class="align-left">{{bmc.timezone}}</td>
                  </tr>
                </table>
              </div>

              <div class="host-time" ng-show="time.owner == 'Split'">
                <h5>Host Time</h5>
                <table class="overview-config-table">
                  <tr>
                    <td>Date</td>
                    <td><input type="date" ng-change="updatedRow()" ng-model="host.date" min="2018-01-01"
                        max="2099-12-31" /></td>
                  </tr>
                  <tr>
                    <td>Time</td>
                    <td><input type="time" ng-change="updatedRow()" ng-model="host.date" /></td>
                  </tr>
                  <tr>
                    <td>Time Zone</td>
                    <td class="align-left">{{host.timezone}}</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>

        </div>

      </div>
    </div>

  </form>
  <br clear="all">
</div>